FROM ethereum/client-go:v1.9.25

ARG NETWORK_ID
ARG HOME_DIRECTORY
ARG TESTNET_DIRECTORY
ARG NODE_DIRECTORY

ENV NETWORK_ID=${NETWORK_ID}
ENV HOME_DIRECTORY=${HOME_DIRECTORY}
ENV TESTNET_DIRECTORY=${TESTNET_DIRECTORY}
ENV NODE_DIRECTORY=${NODE_DIRECTORY}

WORKDIR ${HOME_DIRECTORY}

COPY ./TESTNET ${TESTNET_DIRECTORY}
COPY entrypoint.sh /usr/local/bin/entrypoint.sh

RUN chmod +x /usr/local/bin/entrypoint.sh

EXPOSE 30303 8545

ENTRYPOINT ["/usr/local/bin/entrypoint.sh"]